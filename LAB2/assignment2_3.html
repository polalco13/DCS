<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DCS - 2.3 Rolling Circle (Hypocycloid) Example</title>
  <!-- Math.js library (optional if you need advanced math) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.3.0/math.min.js"></script>
</head>
<body>

<h1>DCS - 2.3 Curve Parametrization: Rolling Circle (Hypocycloid)</h1>

<canvas id="canvas1" width="1000" height="600" style="border:1px solid #d3d3d3;"></canvas>
<br>
<button type="button" onclick="drawRollingCurve()">Draw Rolling Curve</button>
<button type="button" onclick="resetCanvas()">Reset</button>

<!-- Explanation text will appear here -->
<div id="explanation" style="margin-top:20px; font-family:Arial, sans-serif; font-size:16px;"></div>

<script type="text/javascript">

  var canvas1   = document.getElementById("canvas1");
  var context1  = canvas1.getContext("2d");

  // Style settings
  var style = {
    curve:  { width: 3, color: "#CC0000" },   // red curve
    grid:   { width: 1, color: "lightgray" },
  };

  // Translate the origin to the center of the canvas
  // (So x=0,y=0 is at the center)
  context1.translate(canvas1.width/2, canvas1.height/2);
  // Uncomment the next line if you want the y-axis going upwards:
  // context1.scale(1, -1);

  /**
   * Draw the background grid
   */
  function drawGrid(ctx, w, h) {
    var delta = 50; // grid spacing
    var halfW = w/2, halfH = h/2;

    ctx.beginPath();
    for (var x = -halfW; x <= halfW; x += delta) {
      ctx.moveTo(x, -halfH);
      ctx.lineTo(x, halfH);
    }
    for (var y = -halfH; y <= halfH; y += delta) {
      ctx.moveTo(-halfW, y);
      ctx.lineTo(halfW, y);
    }
    ctx.lineWidth = style.grid.width;
    ctx.strokeStyle = style.grid.color;
    ctx.stroke();

    // (Optional) Draw the label for the origin
    ctx.save();
    ctx.scale(1, -1); // if you have flipped y-axis
    ctx.fillStyle = "black";
    ctx.font = "12px Arial";
    ctx.fillText("(0,0)", 5, -5);
    ctx.restore();
  }

  /**
   * Clear the canvas and redraw the grid
   */
  function resetCanvas() {
    context1.clearRect(-canvas1.width/2, -canvas1.height/2, canvas1.width, canvas1.height);
    drawGrid(context1, canvas1.width, canvas1.height);

    // Clear any explanation text
    document.getElementById("explanation").innerHTML = "";
  }

  // Draw the grid initially
  resetCanvas();

  /**
   * Draw the rolling‐circle curve (the deltoid) for R=3, r=1
   * using the standard hypocycloid parametrization.
   */
  function drawRollingCurve() {
    resetCanvas();

    // We'll treat r=1, R=3 => (R - r) = 2 => factor in cos(2t)
    // Param: x(t) = 2*cos(t) + cos(2t), y(t) = 2*sin(t) - sin(2t).
    // We'll scale them by 50 so they're clearly visible.

    context1.save();
    context1.beginPath();
    context1.lineWidth = style.curve.width;
    context1.strokeStyle = style.curve.color;

    // Start at t=0
    var t = 0;
    var x0 = 2*Math.cos(t) + Math.cos(2*t);
    var y0 = 2*Math.sin(t) - Math.sin(2*t);
    context1.moveTo(50*x0, 50*y0);

    // Plot the curve from t=0 to t=2π
    for (t = 0; t <= 2*Math.PI + 0.01; t += 0.01) {
      var x = 2*Math.cos(t) + Math.cos(2*t);
      var y = 2*Math.sin(t) - Math.sin(2*t);
      context1.lineTo(50*x, 50*y);
    }
    context1.stroke();
    context1.restore();

    // Explanation / Justification
    var explanationHTML = `
      <p>
        <strong>Rolling Circle (Hypocycloid) with R=3r:</strong><br>
        We let the larger circle have radius R=3 and the smaller (rolling) circle radius r=1.
        As the smaller circle rolls inside the larger, a point on the smaller circle's rim
        traces out a deltoid described by:
      </p>
      <p style="margin-left: 20px;">
        x(t) = 2 cos(t) + cos(2t), &nbsp;
        y(t) = 2 sin(t) - sin(2t).
      </p>
      <p>
        These equations come from the standard hypocycloid formula
        \\( x(t) = (R - r) \\cos t + r \\cos\\bigl(\\tfrac{R - r}{r}t\\bigr) \\)
        and
        \\( y(t) = (R - r) \\sin t - r \\sin\\bigl(\\tfrac{R - r}{r}t\\bigr) \\),
        with R=3r and r=1.
      </p>
    `;
    document.getElementById("explanation").innerHTML = explanationHTML;
  }
</script>

</body>
</html>
